<!DOCTYPE html>
<meta charset="utf-8">
<style>

.node {
  stroke-width: 1.5px;
}
.link {
  stroke: #000;
  stroke-width: 1.5px;
}
</style>
<html>
<head>

  <link rel="stylesheet" href="http://neo4j-contrib.github.io/developer-resources/language-guides/assets/css/main.css">
</head>
<body>
  <div id="graph">
  </div>
  <div role="navigation" class="navbar navbar-default navbar-static-top">
    <div class="container">
      <div class="row">
        <!-- <div class="col-sm-6 col-md-6">
          <ul class="nav navbar-nav">
            <li>
              <form role="search" class="navbar-form" id="search">
                <div class="form-group">
                  <input type="text" value="Matrix" placeholder="Search for Movie Title" class="form-control" name="search">
                </div>
                <button class="btn btn-default" type="submit">Search</button>
              </form>
            </li>
          </ul>
        </div> -->
        <div class="navbar-header col-sm-6 col-md-6">
          <div class="logo-well">
            <a href="#">
              <img src="https://www.ycombinator.com/images/ycombinator-logo-fb889e2e.png" alt=":v" id="logo">
            </a>
          </div>
          <div class="navbar-brand">
            <div class="brand">Proyecto Y</div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-md-5">
      <div class="panel panel-default">
        <div class="panel-heading">Search Results</div>
        <table id="results" class="table table-striped table-hover">
          <thead>
            <tr>
              <th>Movie</th>
              <th>Released</th>
              <th>Tagline</th>
            </tr>
          </thead>
          <tbody>
          </tbody>
        </table>
      </div>
    </div>
    <div class="col-md-7">
      <div class="panel panel-default">
        <div class="panel-heading" id="title">Details</div>
        <div class="row">
          <div class="col-sm-4 col-md-4">
            <img src="" class="well" id="poster" />
          </div>
          <div class="col-md-8 col-sm-8">
            <h4>Crew</h4>
            <ul id="crew">
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>
<script src="http:////d3js.org/d3.v3.min.js"></script>
<script src="https://code.jquery.com/jquery-2.2.0.min.js"></script>
<script>
var width = 960,
    height = 500;
var graph = {
  "nodes": [
    {"x": 469, "y": 410},
    {"x": 493, "y": 364},
    {"x": 442, "y": 365},
    {"x": 467, "y": 314},
    {"x": 477, "y": 248},
    {"x": 425, "y": 207},
    {"x": 402, "y": 155},
    {"x": 369, "y": 196},
    {"x": 350, "y": 148},
    {"x": 539, "y": 222},
    {"x": 594, "y": 235},
    {"x": 582, "y": 185},
    {"x": 633, "y": 200}
  ],
  "links": [
    {"source":  0, "target":  1},
    {"source":  1, "target":  2},
    {"source":  2, "target":  0},
    {"source":  1, "target":  3},
    {"source":  3, "target":  2},
    {"source":  3, "target":  4},
    {"source":  4, "target":  5},
    {"source":  5, "target":  6},
    {"source":  5, "target":  7},
    {"source":  6, "target":  7},
    {"source":  6, "target":  8},
    {"source":  7, "target":  8},
    {"source":  9, "target":  4},
    {"source":  9, "target": 11},
    {"source":  9, "target": 10},
    {"source": 10, "target": 11},
    {"source": 11, "target": 12},
    {"source": 12, "target": 10}
  ]
};

// graph.nodes.forEach(function(row) {
//   var movie = row.movie;
//   $("<tr><td class='movie'>" + movie.title + "</td><td>" + movie.released + "</td><td>" + movie.tagline + "</td></tr>").appendTo(t)
//     .click(function() {
//       showMovie($(this).find("td.movie").text());
//     })
// });

var force = d3.layout.force()
    .size([width, height])
    .charge(-400)
    .linkDistance(40)
    .on("tick", tick);

var drag = force.drag()
    .on("dragstart", dragstart);

    var svg = d3.select("#graph").append("svg")
      .attr("width", "100%").attr("height", "100%")
      .attr("pointer-events", "all");

var link = svg.selectAll(".link"),
    node = svg.selectAll(".node");



  force
      .nodes(graph.nodes)
      .links(graph.links)
      .start();

  link = link.data(graph.links)
    .enter().append("line")
      .attr("class", "link");

  node = node.data(graph.nodes)
    .enter().append("g")
      .attr("class", "node")
      .attr("r", 12)
      .on("dblclick", dblclick)
      .on("click", click)
      .call(drag);

      node.append("image")
            .attr("xlink:href", "https://github.com/favicon.ico")
            .attr("x", -8)
            .attr("y", -8)
            .attr("width", 16)
            .attr("height", 16);

        node.append("text")
            .attr("dx", 12)
            .attr("dy", ".35em")
            .text(function(d) { return d.x });
function tick() {
  link.attr("x1", function(d) { return d.source.x; })
      .attr("y1", function(d) { return d.source.y; })
      .attr("x2", function(d) { return d.target.x; })
      .attr("y2", function(d) { return d.target.y; });

  node.attr("cx", function(d) { return d.x; })
      .attr("cy", function(d) { return d.y; });
}

function dblclick(d) {
  d3.select(this).classed("fixed", d.fixed = false);

}

function dragstart(d) {
  d3.select(this).classed("fixed", d.fixed = true);
}

function click(d){

  console.log(d);
}

</script>
</body>
</html>
